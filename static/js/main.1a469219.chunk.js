(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),o=(a(75),a(18)),l=a(10),u=a(55),s=a(16),m=a(56),h=a(5),d=function(e){return{type:"SET_CURRENT_WEATHER",payload:e}},p=function(e){return{type:"SET_DAILY_WEATHER",payload:e}},f=function(e){return{type:"SET_HOURLY_WEATHER",payload:e}},y=function(e){return{type:"LOADING",payload:e}},g={currentWeather:null,dailyWeather:null,hourlyWeather:null,toggle:!0,loading:!1},E=a(42),_=function(e){return{type:"ADD_CURRENT_CITY",city:e}},v={cities:[]},w=a(57),b=a.n(w),W=a(41),C=Object(s.c)({weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_WEATHER":var a={dt:t.payload.dt,dt_txt:t.payload.dt_txt,temp:t.payload.main.temp,name:t.payload.name,weather:{icon:t.payload.weather[0].icon,main:t.payload.weather[0].main}};return Object(h.a)(Object(h.a)({},e),{},{currentWeather:a});case"SET_DAILY_WEATHER":return Object(h.a)(Object(h.a)({},e),{},{dailyWeather:t.payload});case"SET_HOURLY_WEATHER":return Object(h.a)(Object(h.a)({},e),{},{hourlyWeather:t.payload});case"SET_TOGGLE":return Object(h.a)(Object(h.a)({},e),{},{toggle:t.payload});case"LOADING":return Object(h.a)(Object(h.a)({},e),{},{loading:t.payload});default:return e}},cities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CITY":case"ADD_CURRENT_CITY":return Object(h.a)(Object(h.a)({},e),{},{cities:[].concat(Object(E.a)(e.cities),[t.city])});case"DELETE_CITY":return Object(h.a)(Object(h.a)({},e),{},{cities:e.cities.filter((function(e){return e.id!==t.id}))});default:return e}}}),D={key:"root",storage:b.a,whitelist:["cities"]},O=Object(W.a)(D,C),j=Object(s.d)(O,Object(s.a)(m.a)),T=Object(W.b)(j);window.store=j;var x=a(34),N=a.n(x),k=a(29),R=a.n(k),A=Object(o.b)((function(e){return{toggle:e.weather.toggle}}),{setToggle:function(e){return{type:"SET_TOGGLE",payload:e}}})((function(e){var t=e.toggle,a=e.setToggle;return r.a.createElement("div",{className:R.a.toggle},r.a.createElement("input",{name:"toggle",type:"radio",value:"celsius",onChange:function(){return a(!0)},checked:t}),"\xb0C",r.a.createElement("input",{name:"toggle",type:"radio",value:"fahrenheit",onChange:function(){return a(!1)}}),"\xb0F")})),H=function(){return r.a.createElement("nav",{className:N.a.nav},r.a.createElement(l.b,{activeClassName:N.a.active,to:"/weather"},"Home"),r.a.createElement(l.b,{activeClassName:N.a.active,to:"/cities"},"Favorite Cities"),r.a.createElement(A,null))},I=(a(83),a(4)),S=a(58),L=a(59),Y=a(69),U=a(68),F=a(17),M=a.n(F),G=a(6),q=a.n(G),B=a(2),J=a.n(B),P=(J.a.number,J.a.string,J.a.number,J.a.string,J.a.shape({icon:J.a.string,main:J.a.string}),J.a.number,J.a.string,J.a.string,J.a.string,J.a.number,function(e){var t=e.daily,a=e.toggle,n=e.name,c=e.dt,i=Math.floor(t.temp-273.15),o=Math.floor(9*i/5+32),u=t.dt_txt.slice(5,10),s=new Date(1e3*c).getDate(),m=new Date(1e3*t.dt).getDate();return r.a.createElement(l.b,{to:"/weather/".concat(n,"/").concat(m),style:{color:"black",textDecoration:"none"}},r.a.createElement("div",{className:q()(M.a.DailyWeatheritem,s===m&&M.a.currentDay)},r.a.createElement("div",{className:"date"},u),r.a.createElement("div",null,a?r.a.createElement("h2",null,i,"\xb0C"):r.a.createElement("h2",null,o,"\xb0F"),r.a.createElement("img",{src:"http://openweathermap.org/img/wn/"+t.weather.icon+".png",alt:""}))))}),z=a(60),X=a.n(z),K=function(){return r.a.createElement("div",{className:R.a.loader},r.a.createElement("img",{src:X.a,alt:""}))},Q=function(e){var t=e.currentWeather,a=e.toggle,n=e.loading,c=t.name,i=t.temp,o=t.weather,l=Math.floor(i-273.15),u=Math.floor(9*l/5+32);return n?r.a.createElement(K,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,c),a?r.a.createElement("h1",null,l,"\xb0C"):r.a.createElement("h1",null,u,"\xb0F"),r.a.createElement("img",{src:"http://openweathermap.org/img/wn/"+o.icon+"@4x.png",alt:""}),r.a.createElement("h4",null,o.main))},V=function(e){var t=e.hourly,a=e.toggle,n=Math.floor(t.temp-273.15),c=Math.floor(9*n/5+32),i=t.dt_txt.slice(10);return r.a.createElement("div",{className:M.a.hourlyWeatherItem},r.a.createElement("div",null,i),a?r.a.createElement("div",null,n,"\xb0C"):r.a.createElement("div",null,c,"\xb0F"),r.a.createElement("img",{src:"http://openweathermap.org/img/wn/"+t.icon+".png",alt:""}))},Z=function(e){var t=e.currentWeather,a=e.dailyWeather,n=e.hourlyWeather,c=e.toggle,i=e.loading;return r.a.createElement("div",{className:M.a.weather},r.a.createElement("div",{className:M.a.currentWeather},r.a.createElement(Q,{currentWeather:t,toggle:c,loading:i})),r.a.createElement("div",{className:M.a.hourlyWeather},n.map((function(e){return r.a.createElement(V,{key:e.dt_txt,hourly:e,toggle:c})}))),r.a.createElement("div",{className:M.a.dailyWeather},a.map((function(e){return r.a.createElement(P,{key:e.dt,daily:e,toggle:c,dt:t.dt,name:t.name})}))))},$=a(19),ee=a.n($),te=a(35),ae=a(61),ne=a.n(ae).a.create({baseURL:"https://api.openweathermap.org/data/2.5/"}),re="4f854dff31c2e1ca2516bffdbe8c42c1",ce=function(e){return ne.get("weather?".concat(e,"&appid=").concat(re))},ie=function(e){return ne.get("forecast?q=".concat(e,"&appid=").concat(re))},oe=function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,r,c;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie(e);case 2:n=t.sent,(r=n.data.list.filter((function(e){var t=(new Date).getHours(),a=new Date(e.dt_txt).getHours();if(t>=a&&t<a+3)return e}))).filter((function(e){if(new Date!==new Date(e.dt_txt))return e})),c=r.map((function(t){return t={dt:t.dt,dt_txt:t.dt_txt,temp:t.main.temp,name:e,weather:{icon:t.weather[0].icon,main:t.weather[0].main}}})),a(p(c));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},le=function(e,t){return function(){var a=Object(te.a)(ee.a.mark((function a(n){var r,c,i,o,l;return ee.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(y(!0)),a.next=3,ie(e);case 3:r=a.sent,c=r.data.list.filter((function(e){var a=new Date(e.dt_txt).getDate(),n=new Date(e.dt_txt).getHours(),r=(new Date).getHours();if(a==t&&r>=n&&r<n+3)return e})),i=Object(h.a)(Object(h.a)({},r.data.city),c[0]),n(d(i)),o=r.data.list.filter((function(e){if(new Date(e.dt_txt).getDate()==t)return e})),l=o.map((function(e){return e={temp:e.main.temp,dt_txt:e.dt_txt,icon:e.weather[0].icon}})),n(f(l)),n(y(!1));case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},ue=function(e){Object(Y.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).refreshWeather=function(){var t=e.props.match.params.day;if(void 0===t&&(t=(new Date).getDate()),e.props.match.params.city){var a="q=".concat(e.props.match.params.city);e.props.requestCurrentWeather(a,t)}else navigator.geolocation.getCurrentPosition((function(a){var n=a.coords.latitude,r=a.coords.longitude,c="lat=".concat(n,"&lon=").concat(r);e.props.requestCurrentWeather(c,t)}))},e}return Object(L.a)(a,[{key:"componentDidMount",value:function(){this.refreshWeather()}},{key:"componentDidUpdate",value:function(e,t){e.match.params.day!==this.props.match.params.day&&this.refreshWeather()}},{key:"render",value:function(){return this.props.currentWeather&&this.props.hourlyWeather?r.a.createElement(Z,{currentWeather:this.props.currentWeather,dailyWeather:this.props.dailyWeather,hourlyWeather:this.props.hourlyWeather,toggle:this.props.toggle,loading:this.props.loading}):r.a.createElement(K,null)}}]),a}(n.Component),se=Object(I.f)(Object(o.b)((function(e){return{currentWeather:e.weather.currentWeather,dailyWeather:e.weather.dailyWeather,hourlyWeather:e.weather.hourlyWeather,toggle:e.weather.toggle,loading:e.weather.loading}}),{requestCurrentWeather:function(e,t){return function(){var a=Object(te.a)(ee.a.mark((function a(n,r){var c,i,o;return ee.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ce(e);case 2:c=a.sent,n(oe(c.data.name,c.data.dt)),n(le(c.data.name,t)),i={name:c.data.name,id:Date.now()},(0===(o=r().cities.cities).length||o.every((function(e){return e.name!==i.name})))&&n(_(i));case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}})(ue)),me=a(43),he=a(25),de=a.n(he),pe=a(36),fe=a.n(pe),ye=a(62),ge=a.n(ye),Ee=function(e){var t=e.city,a=e.onCityDelete;return r.a.createElement("div",{className:fe.a.city,key:t.id},r.a.createElement(l.b,{to:"/weather/"+t.name},t.name),r.a.createElement("div",{className:fe.a.icons},r.a.createElement("img",{className:fe.a.icon,src:ge.a,alt:"",onClick:function(){return a(t.id)}})))},_e=a(106),ve=a(107),we=function(e){var t=e.error,a=e.handleClose;return r.a.createElement(_e.a,{show:!!t,onHide:a,backdrop:"static",keyboard:!1},r.a.createElement(_e.a.Header,{closeButton:!0},r.a.createElement(_e.a.Title,null,"Error")),r.a.createElement(_e.a.Body,null,t),r.a.createElement(_e.a.Footer,null,r.a.createElement(ve.a,{variant:"secondary",onClick:a},"Close")))},be=a(67),We=[{component:se,path:"/weather/:city?/:day?"},{component:Object(o.b)((function(e){return{cities:e.cities.cities}}),{addCity:function(e){return{type:"ADD_CITY",city:e}},onCityDelete:function(e){return{type:"DELETE_CITY",id:e}}})((function(e){var t=e.cities,a=e.addCity,c=e.onCityDelete,i=Object(n.useState)(""),o=Object(me.a)(i,2),l=o[0],u=o[1],s=Object(n.useState)(""),m=Object(me.a)(s,2),h=m[0],d=m[1];return r.a.createElement("div",{className:de.a.cities},r.a.createElement("form",{onSubmit:function(e){if(l.trim()){e.preventDefault();var n=l[0].toUpperCase()+l.slice(1);if(be.filter((function(e){if(n===e.name)return e})).length)if(t.filter((function(e){if(n===e.name)return e})).length)d("City is already added");else{var r={name:n,id:Date.now()};a(r),u("")}else d("City is not defined")}else e.preventDefault()},className:de.a.input},r.a.createElement("input",{type:"text",value:l,onChange:function(e){return u(e.currentTarget.value)}}),r.a.createElement("button",null,"Add City +")),r.a.createElement("div",{className:de.a.inner},0===t.length?r.a.createElement("div",{className:de.a.empty},"empty..."):t.map((function(e){return r.a.createElement(Ee,{key:e.id,city:e,onCityDelete:c})}))),r.a.createElement(we,{error:h,handleClose:function(){return d("")}}))})),path:"/cities"}],Ce=function(){return r.a.createElement(r.a.Fragment,null,We.map((function(e){return r.a.createElement(I.b,{key:e.path,path:e.path,component:e.component})})),r.a.createElement(I.b,{exact:!0,path:"/",render:function(){return r.a.createElement(I.a,{to:"/weather"})}}))},De=function(){return r.a.createElement(o.a,{store:j},r.a.createElement(u.a,{loading:null,persistor:T},r.a.createElement(l.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(H,null),r.a.createElement("div",{className:"content"},r.a.createElement(Ce,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},17:function(e,t,a){e.exports={weather:"weather_weather__uDB3l",currentWeather:"weather_currentWeather__1s5vX",hourlyWeather:"weather_hourlyWeather__2PmXC",hourlyWeatherItem:"weather_hourlyWeatherItem__3DzmQ",dailyWeather:"weather_dailyWeather__1DmLr",DailyWeatheritem:"weather_DailyWeatheritem__3rzgT",currentDay:"weather_currentDay__jhBRq"}},25:function(e,t,a){e.exports={cities:"CitiesPage_cities__SJOJY",input:"CitiesPage_input__DKyH8",inner:"CitiesPage_inner__10A3N"}},29:function(e,t,a){e.exports={toggle:"common_toggle__3tY5A",loader:"common_loader__2jlxV"}},34:function(e,t,a){e.exports={nav:"Navbar_nav__1zXyi",active:"Navbar_active__R_O9E"}},36:function(e,t,a){e.exports={cities:"City_cities__2OORZ",input:"City_input__2z9tk",inner:"City_inner__1hCAk",city:"City_city__2p_To",empty:"City_empty__9HJKb",icons:"City_icons__3OdyG",icon:"City_icon__6iO3-"}},60:function(e,t,a){e.exports=a.p+"static/media/loader.5b18094e.svg"},62:function(e,t,a){e.exports=a.p+"static/media/delete.12333ffe.svg"},70:function(e,t,a){e.exports=a(103)},75:function(e,t,a){},83:function(e,t,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.1a469219.chunk.js.map